# 📷 OCR文字识别功能指南

## 🌟 功能概述

车辆维修记录管理系统集成了百度OCR文字识别功能，可以帮助您快速识别和录入各种文字信息，大大提高数据录入效率。

## 🔧 支持的识别类型

### 1. 🚗 车牌号识别
- **功能**：自动识别车牌号码和颜色
- **用途**：快速添加车辆信息，搜索车辆
- **支持格式**：中国大陆各类车牌
- **识别准确率**：95%+

### 2. 🆔 VIN码识别
- **功能**：识别17位车架号
- **用途**：车辆信息录入，车辆查询
- **支持格式**：标准17位VIN码
- **识别准确率**：90%+

### 3. 🧾 发票信息识别
- **功能**：提取发票号码、日期、金额、商家等信息
- **用途**：维修记录录入，费用统计
- **支持格式**：增值税发票、通用发票
- **智能提取**：自动识别维修相关项目和金额

### 4. 📝 通用文字识别
- **功能**：识别图片中的所有文字
- **用途**：通用文本录入
- **支持语言**：中文、英文混合
- **识别准确率**：95%+

## 🚀 使用方法

### 在首页使用OCR

1. **打开应用首页**
2. **点击搜索框右侧的相机图标**
3. **选择识别类型**：
   - 车牌识别
   - VIN码识别
   - 发票识别
   - 通用识别
4. **拍照或选择图片**
5. **等待识别完成**
6. **结果自动填充到搜索框**

### 在专用OCR页面使用

1. **点击首页"文字识别"按钮**
2. **选择识别类型**
3. **拍照或从相册选择图片**
4. **点击"开始识别"**
5. **查看识别结果**
6. **复制或应用结果**

## 📸 拍照技巧

### 车牌识别
- ✅ 确保车牌完整清晰
- ✅ 避免强光反射
- ✅ 保持水平角度
- ❌ 避免模糊或遮挡

### VIN码识别
- ✅ 找到车架号位置（通常在前挡风玻璃下）
- ✅ 确保字符清晰可见
- ✅ 避免阴影遮挡
- ❌ 注意避免相似字符混淆

### 发票识别
- ✅ 发票摊平放置
- ✅ 确保所有文字清晰
- ✅ 光线均匀充足
- ❌ 避免折叠或破损

## ⚙️ 配置要求

### 后端配置

```javascript
// backend/config.js
baiduOcr: {
  appId: 'your_app_id',
  apiKey: 'your_api_key', 
  secretKey: 'your_secret_key'
}
```

### 环境变量配置（推荐）

```bash
# backend/.env
BAIDU_OCR_APP_ID=your_app_id
BAIDU_OCR_API_KEY=your_api_key
BAIDU_OCR_SECRET_KEY=your_secret_key
```

### 获取百度OCR密钥

1. 访问 [百度智能云](https://cloud.baidu.com/)
2. 注册并登录账号
3. 进入 [文字识别产品页](https://cloud.baidu.com/product/ocr)
4. 创建应用获取密钥
5. 将密钥配置到系统中

## 📊 识别结果处理

### 车牌识别结果
```json
{
  "plateNumber": "京A12345",
  "color": "蓝色",
  "confidence": 0.99
}
```

### VIN码识别结果
```json
{
  "vins": ["1HGBH41JXMN109186"],
  "fullText": "完整识别文本",
  "confidence": 0.95
}
```

### 发票识别结果
```json
{
  "invoice": {
    "invoiceNum": "发票号码",
    "invoiceDate": "2024-01-01", 
    "totalAmount": "500.00",
    "sellerName": "维修店名称"
  },
  "repairInfo": {
    "amounts": [500.00],
    "dates": ["2024-01-01"],
    "repairItems": ["机油更换", "保养"]
  }
}
```

## 🔒 权限要求

### Android权限
```xml
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
```

### iOS权限
```plist
<key>NSCameraUsageDescription</key>
<string>需要相机权限来拍摄识别图片</string>
<key>NSPhotoLibraryUsageDescription</key>
<string>需要相册权限来选择识别图片</string>
```

## ⚡ 性能优化

### 图片预处理
- 自动调整图片大小（最大2000x2000）
- 图片锐化增强
- 亮度对比度优化
- 压缩优化（JPEG 90%质量）

### 识别速度
- 一般识别：2-5秒
- 车牌识别：1-3秒
- 发票识别：3-8秒
- VIN码识别：2-4秒

### 网络要求
- 需要稳定的网络连接
- 建议使用WiFi或4G网络
- 图片大小限制：5MB以内

## 🐛 常见问题

### Q: 识别失败怎么办？
A: 
1. 检查网络连接
2. 确保图片清晰
3. 重新拍照尝试
4. 检查百度OCR配置

### Q: 识别不准确怎么办？
A:
1. 改善拍照环境（光线、角度）
2. 清理镜头
3. 手动输入补充
4. 尝试多次识别

### Q: 无法使用相机？
A:
1. 检查相机权限
2. 重启应用
3. 检查设备相机功能
4. 使用相册选择图片

### Q: OCR功能不可用？
A:
1. 检查百度OCR配置
2. 验证API密钥有效性
3. 检查网络连接
4. 查看后端日志

## 💡 使用建议

1. **拍照环境**：选择光线充足、背景简洁的环境
2. **图片质量**：尽量使用高清晰度图片
3. **网络环境**：使用稳定的网络连接
4. **结果验证**：识别后请验证结果准确性
5. **备选方案**：保留手动输入选项

## 🔄 功能更新

### v1.0 当前功能
- ✅ 基础OCR识别
- ✅ 车牌号识别
- ✅ VIN码识别  
- ✅ 发票信息识别
- ✅ 图片预处理优化

### 🚧 计划功能
- 🔄 批量识别
- 🔄 离线识别模式
- 🔄 识别历史记录
- 🔄 更多发票格式支持
- 🔄 自定义识别模板

---

**💡 提示：OCR功能是可选的，即使不配置百度OCR，系统的其他功能也可以正常使用。** 